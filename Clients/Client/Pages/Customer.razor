@page "/customer/{parameter}"
@using NotatnikMechanika.Core.PageModels
@using MvvmPackage.Blazor
@using NotatnikMechanika.Shared.Models.Car
@inherits PageBase<CustomerPageModel>

@if (!PageModel.IsLoading)
{

    <WrapPanel>
        <WrapPanelCard>
            <CardHeader>
                <MatIconButton Icon="@MatIconNames.Person" />
                <p>Informacje</p>
                <MatIconButton Icon="@MatIconNames.Edit" />
            </CardHeader>

            <CardContent>
                <p>@PageModel.CustomerModel.Name</p>
                <p>@PageModel.CustomerModel.Surname</p>
                <p>@PageModel.CustomerModel.Phone</p>
                <p>@PageModel.CustomerModel.Address</p>
                <p>@PageModel.CustomerModel.CompanyName</p>
                <p>@PageModel.CustomerModel.CompanyIdentyficator</p>
            </CardContent>
        </WrapPanelCard>

        <WrapPanelCard>

            <CardHeader>
                <MatIconButton Icon="@MatIconNames.Card_giftcard" />
                <p>Samochody</p>
                <MatIconButton Command="PageModel.AddCarCommand" Icon="@MatIconNames.Add" />
            </CardHeader>
            <CardContent>
                <MatAccordion>
                    @foreach (CarModel car in PageModel.Cars)
                    {
                        <MatExpansionPanel>
                            <MatExpansionPanelSummary>
                                <p>@car.Brand</p>
                                <p>@car.Model</p>
                            </MatExpansionPanelSummary>
                            <MatExpansionPanelDetails>
                                <p>@car.Plate</p>
                                <p>@car.Vin</p>
                                <p>@car.Power</p>
                                <div class="car-options">
                                    <MatIconButton Icon="@MatIconNames.Add" />
                                    <MatIconButton Icon="@MatIconNames.Edit" />
                                    <MatIconButton Icon="@MatIconNames.Remove" Command="PageModel.RemoveCarCommand" CommandParameter="car.Id" />
                                </div>
                            </MatExpansionPanelDetails>
                        </MatExpansionPanel>
                    }
                </MatAccordion>
            </CardContent>
        </WrapPanelCard>

        <WrapPanelCard>
            <CardHeader>
                <MatIconButton Icon="@MatIconNames.Card_giftcard" />
                <p>Samochody</p>
                <MatIconButton Command="PageModel.AddCarCommand" Icon="@MatIconNames.Add" />
            </CardHeader>
            <CardContent>
                <MatAccordion>
                    @foreach (CarModel car in PageModel.Cars)
                    {
                        <MatExpansionPanel>
                            <MatExpansionPanelSummary>
                                <p>@car.Brand</p>
                                <p>@car.Model</p>
                            </MatExpansionPanelSummary>
                            <MatExpansionPanelDetails>
                                <p>@car.Plate</p>
                                <p>@car.Vin</p>
                                <p>@car.Power</p>
                                <div class="car-options">
                                    <MatIconButton Icon="@MatIconNames.Add" />
                                    <MatIconButton Icon="@MatIconNames.Edit" />
                                    <MatIconButton Icon="@MatIconNames.Remove" Command="PageModel.RemoveCarCommand" CommandParameter="car.Id" />
                                </div>
                            </MatExpansionPanelDetails>
                        </MatExpansionPanel>
                    }
                </MatAccordion>
            </CardContent>
        </WrapPanelCard>

        <WrapPanelCard>
            <CardHeader>
                <MatIconButton Icon="@MatIconNames.Card_giftcard" />
                <p>Samochody</p>
                <MatIconButton Command="PageModel.AddCarCommand" Icon="@MatIconNames.Add" />
            </CardHeader>
            <CardContent>
                <MatAccordion>
                    @foreach (CarModel car in PageModel.Cars)
                    {
                        <MatExpansionPanel>
                            <MatExpansionPanelSummary>
                                <p>@car.Brand</p>
                                <p>@car.Model</p>
                            </MatExpansionPanelSummary>
                            <MatExpansionPanelDetails>
                                <p>@car.Plate</p>
                                <p>@car.Vin</p>
                                <p>@car.Power</p>
                                <div class="car-options">
                                    <MatIconButton Icon="@MatIconNames.Add" />
                                    <MatIconButton Icon="@MatIconNames.Edit" />
                                    <MatIconButton Icon="@MatIconNames.Remove" Command="PageModel.RemoveCarCommand" CommandParameter="car.Id" />
                                </div>
                            </MatExpansionPanelDetails>
                        </MatExpansionPanel>
                    }
                </MatAccordion>
            </CardContent>
        </WrapPanelCard>
    </WrapPanel>
}
else
{
    <MatProgressBar Indeterminate="true" />
}


